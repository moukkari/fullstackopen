(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{14:function(e,t,n){e.exports=n(38)},19:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),u=n(13),o=n.n(u),c=(n(19),n(2)),l=function(e){return a.a.createElement("form",null,"filter ",a.a.createElement("input",{onChange:function(t){e.setFiltered(e.persons.filter((function(e){return e.name.toLowerCase().includes(t.target.value.toLowerCase())})))}}))},i=n(3),s=n.n(i),m="/api/persons",f=function(){return s.a.get(m).then((function(e){return e.data}))},d=function(e){return s.a.post(m,e).then((function(e){return e.data}))},p=function(e){var t=s.a.delete("".concat(m,"/").concat(e)).catch((function(){return{status:404}}));return console.log("deleted id ".concat(e)),t.then((function(e){return e.status}))},b=function(e,t){return s.a.put("".concat(m,"/").concat(e),t).then((function(e){return e.data}))},h=(n(37),function(e){var t=e.msg,n=e.error;return""===t||null===t?null:n?a.a.createElement("div",{className:"error note"},t):a.a.createElement("div",{className:"info note"},t)}),E=function(e){var t=Object(r.useState)(""),n=Object(c.a)(t,2),u=n[0],o=n[1],l=Object(r.useState)(""),i=Object(c.a)(l,2),s=i[0],m=i[1],p=Object(r.useState)(""),E=Object(c.a)(p,2),v=E[0],j=E[1];return a.a.createElement("form",{onSubmit:function(t){if(t.preventDefault(),e.persons.some((function(e){return e.name===u}))){if(window.confirm("".concat(u," is already in the phonebook. Replace the old number with a new one?"))){var n=e.persons.find((function(e){return e.name===u}));n.number=s,b(n.id,n).then((function(t){return f().then((function(t){e.setAllPersons(t),j("Updated ".concat(n.name)),setTimeout((function(){return j(null)}),5e3)}))}))}}else d({name:u,number:s}).then((function(t){e.setAllPersons(e.persons.concat(t)),j("Added ".concat(t.name)),setTimeout((function(){return j(null)}),5e3)}))}},a.a.createElement("div",null,"name: ",a.a.createElement("input",{onChange:function(e){return o(e.target.value)},placeholder:"New person..."}),a.a.createElement("br",null),"number: ",a.a.createElement("input",{onChange:function(e){return m(e.target.value)}})),a.a.createElement("div",null,a.a.createElement("button",{type:"submit"},"add"),a.a.createElement(h,{msg:v,error:!1})))},v=function(e){var t=Object(r.useState)(""),n=Object(c.a)(t,2),u=n[0],o=n[1],l=e.data.map((function(t){return a.a.createElement("p",{key:t.name},t.name," - ",t.number,a.a.createElement("button",{onClick:function(){return function(t){window.confirm("Do you really want to delete ".concat(t.name))&&p(t.id).then((function(n){200===n?(e.setAllPersons(e.data.filter((function(e){return e!==t}))),o("Deleted ".concat(t.name)),setTimeout((function(){return o(null)}),5e3)):(e.setAllPersons(e.data.filter((function(e){return e!==t}))),o("".concat(t.name," has already been deleted")),setTimeout((function(){return o(null)}),5e3))}))}(t)}},"remove"))}));return a.a.createElement("div",null,a.a.createElement(h,{msg:u,error:!0}),l)},j=function(){var e=Object(r.useState)([]),t=Object(c.a)(e,2),n=t[0],u=t[1],o=Object(r.useState)([]),i=Object(c.a)(o,2),s=i[0],m=i[1],d=function(e){u(e),m(e)};return Object(r.useEffect)((function(){f().then((function(e){d(e)}))}),[]),a.a.createElement("div",null,a.a.createElement("h2",null,"Phonebook"),a.a.createElement(l,{persons:n,setFiltered:m}),a.a.createElement("h3",null,"Add new"),a.a.createElement(E,{persons:n,setAllPersons:d}),a.a.createElement("h3",null,"Numbers"),a.a.createElement(v,{data:s,setAllPersons:d}))};o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(j,null)),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.b042e4fc.chunk.js.map