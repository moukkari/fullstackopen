(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{14:function(e,t,n){e.exports=n(38)},19:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),u=n(13),o=n.n(u),c=(n(19),n(2)),l=function(e){return r.a.createElement("form",null,"filter ",r.a.createElement("input",{onChange:function(t){e.setFiltered(e.persons.filter((function(e){return e.name.toLowerCase().includes(t.target.value.toLowerCase())})))}}))},i=n(3),s=n.n(i),m="/api/persons",f=function(){return s.a.get(m).then((function(e){return e.data}))},d=function(e){return s.a.post(m,e).then((function(e){return e.data}))},b=function(e){var t=s.a.delete("".concat(m,"/").concat(e)).catch((function(){return{status:404}}));return console.log("deleted id ".concat(e)),t.then((function(e){return e.status}))},p=function(e,t){return s.a.put("".concat(m,"/").concat(e),t).then((function(e){return e.data}))},h=(n(37),function(e){var t=e.msg,n=e.error;return""===t||null===t?null:n?r.a.createElement("div",{className:"error note"},t):r.a.createElement("div",{className:"info note"},t)}),E=function(e){var t=Object(a.useState)(""),n=Object(c.a)(t,2),u=n[0],o=n[1],l=Object(a.useState)(""),i=Object(c.a)(l,2),s=i[0],m=i[1],b=Object(a.useState)(""),E=Object(c.a)(b,2),v=E[0],j=E[1],O=Object(a.useState)(!1),w=Object(c.a)(O,2),g=w[0],S=w[1];return r.a.createElement("form",{onSubmit:function(t){if(t.preventDefault(),e.persons.some((function(e){return e.name===u}))){if(window.confirm("".concat(u," is already in the phonebook. Replace the old number with a new one?"))){var n=e.persons.find((function(e){return e.name===u}));n.number=s,p(n.id,n).then((function(t){return f().then((function(t){e.setAllPersons(t),j("Updated ".concat(n.name)),setTimeout((function(){return j(null)}),5e3)}))}))}}else d({name:u,number:s}).then((function(t){e.setAllPersons(e.persons.concat(t)),j("Added ".concat(t.name)),setTimeout((function(){return j(null)}),5e3)})).catch((function(e){S(!0),j(e.response.data.error),setTimeout((function(){j(null),S(!1)}),5e3)}))}},r.a.createElement("div",null,"name: ",r.a.createElement("input",{onChange:function(e){return o(e.target.value)},placeholder:"New person..."}),r.a.createElement("br",null),"number: ",r.a.createElement("input",{onChange:function(e){return m(e.target.value)}})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add"),r.a.createElement(h,{msg:v,error:g})))},v=function(e){var t=Object(a.useState)(""),n=Object(c.a)(t,2),u=n[0],o=n[1],l=e.data.map((function(t){return r.a.createElement("p",{key:t.name},t.name," - ",t.number,r.a.createElement("button",{onClick:function(){return function(t){window.confirm("Do you really want to delete ".concat(t.name))&&b(t.id).then((function(n){204===n?(e.setAllPersons(e.data.filter((function(e){return e!==t}))),o("Deleted ".concat(t.name)),setTimeout((function(){return o(null)}),5e3)):(e.setAllPersons(e.data.filter((function(e){return e!==t}))),o("".concat(t.name," has already been deleted")),setTimeout((function(){return o(null)}),5e3))}))}(t)}},"remove"))}));return r.a.createElement("div",null,r.a.createElement(h,{msg:u,error:!0}),l)},j=function(){var e=Object(a.useState)([]),t=Object(c.a)(e,2),n=t[0],u=t[1],o=Object(a.useState)([]),i=Object(c.a)(o,2),s=i[0],m=i[1],d=function(e){u(e),m(e)};return Object(a.useEffect)((function(){f().then((function(e){d(e)}))}),[]),r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(l,{persons:n,setFiltered:m}),r.a.createElement("h3",null,"Add new"),r.a.createElement(E,{persons:n,setAllPersons:d}),r.a.createElement("h3",null,"Numbers"),r.a.createElement(v,{data:s,setAllPersons:d}))};o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(j,null)),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.fe937bce.chunk.js.map